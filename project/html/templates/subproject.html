<section>
	<md-subheader class="md-primary">Analysis type</md-subheader>
	
	<md-switch md-invert ng-model="subproject.dataset.pairedend" aria-label="Library" ng-change="onChangeLibrary(subproject.dataset.pairedend)">
    	Paired-end library {{ pairedend }}
  	</md-switch>
  	
  	<label>Select the genome</label>
	<md-select ng-model="subproject.dataset.genome" aria-label="Specifies the genome">
       	<md-option ng-repeat="genome in genomes" ng-value="genome.id">
       		<div flex layout="row">
       			<div>
       				<img width="50px" ng-src="{{genome.img}}">
       			</div>
	       		<div layout="row" layout-align="left center">
					<span>{{genome.organism}} - {{genome.name}} &nbsp;</span><span style="color: grey;">({{genome.id}})</span>
	       		</div>
	       	</div>
       	</md-option>
	</md-select>
</section>

<section>
	<md-subheader class="md-primary">Dataset</md-subheader>
	<label>Dataset information</label>
	<md-content layout="column" layout-padding>
		<md-input-container>
			<label>Project ID</label>
			<input label="Project ID" type="text" ng-model="subproject.dataset.id">
		</md-input-container>
		<md-input-container>
			<label>Sample IDS (one per line) <span style="color: grey;">(<span ng-bind="subproject.dataset.sample_ids.split('\n').length"></span> sample(s) defined)</span></label>
 					<textarea rows="10" label="Sample IDS" ng-model="subproject.dataset.sample_ids"></textarea>
					</md-input-container>
					<md-input-container>
			<label>Base directory</label>
			<input label="Basedir" type="text" ng-model="subproject.dataset.basedir">
			<md-checkbox ng-model="subproject.dataset.create_per_sample_directory" aria-label="Create a directory for each sample">
			<span>Create a directory for each sample</span>
		</md-checkbox>
		</md-input-container>
		<md-input-container>
			<label>Variable to use across scripts to refer to this project ID</label>
			<input label="Project variable" type="text" ng-model="subproject.dataset.project_variable">
		</md-input-container>
		<md-input-container>
			<label>Variable to use across scripts to refer to the index of this project</label>
			<input label="Project index variable" type="text" ng-model="subproject.dataset.project_index_variable">
		</md-input-container>		
		<md-input-container>
			<label>Variable to use across scripts to refer to a sample in this project</label>
			<input label="Sample variable" type="text" ng-model="subproject.dataset.sample_variable">
		</md-input-container>
		<md-input-container>
			<label>Variable to use across scripts to refer to ALL samples in this project</label>
			<input label="All-samples variable" type="text" ng-model="subproject.dataset.all_samples_variable">
		</md-input-container>
	</md-content>
</section>

<section>
	<md-subheader class="md-primary">Steps</md-subheader>
	<div layout="column">
		<div layout-padding>
			<md-button class="md-raised md-warn md-icon-button" ng-click="copy_steps(subproject)" tooltip="Copy these steps to ALL other projects" aria-label="Copy these steps to ALL other projects">
				<i class="fas fa-copy"></i>
   			</md-button>
   			<span>Copy these steps to ALL other projects</span>
		</div>
	<div>
	<v-accordion multiple onexpand="select_step(index)">
	  <v-pane ng-repeat="step in subproject.steps">
	    <v-pane-header ng-class="{disabled_step: step.skip}">
	    
	    	<md-button ng-if="step.skip" class="md-icon-button">
		      <ng-md-icon icon="low_priority"></ng-md-icon>
		    </md-button>
	    	
	    	<span md-truncate flex><b ng-if="step.skip">(skipped)&nbsp;</b><b>Step {{$index+1}}: {{step.title}}</b></span>
	    	
	    	<md-button class="md-icon-button" ng-click="showDeleteStepDialog($index, $event)" tooltip="Delete this step" aria-label="Remove step">
		      <ng-md-icon icon="delete"></ng-md-icon>
		    </md-button>
		    
		    <md-button class="md-icon-button" ng-click="toggleStep($index, $event)" tooltip="Exclude/include this step" aria-label="Exclude/include step">
		      <ng-md-icon icon="highlight_off"></ng-md-icon>
		    </md-button>
		    
		    
		    <md-button class="md-icon-button" ng-click="move_item(subproject.steps, $index, -1, $event)" tooltip="Move up this step" aria-label="Move up this step">
		      <ng-md-icon icon="keyboard_arrow_up"></ng-md-icon>
		    </md-button>
		    <md-button class="md-icon-button" ng-click="move_item(subproject.steps, $index, 1, $event)" tooltip="Move down this step" aria-label="Move down this step">
		      <ng-md-icon icon="keyboard_arrow_down"></ng-md-icon>
		    </md-button>
		    
	    </v-pane-header>
	    <v-pane-content>
	    	<div ng-include="'templates/step.html'"></div>
	    </v-pane-content>
	  </v-pane>
	</v-accordion>
</section>